!function(r){function e(r,e,n,i){if(e.points.errorbars){var o=[{x:!0,number:!0,required:!0},{y:!0,number:!0,required:!0}],a=e.points.errorbars;("x"===a||"xy"===a)&&(e.points.xerr.asymmetric?(o.push({x:!0,number:!0,required:!0}),o.push({x:!0,number:!0,required:!0})):o.push({x:!0,number:!0,required:!0})),("y"===a||"xy"===a)&&(e.points.yerr.asymmetric?(o.push({y:!0,number:!0,required:!0}),o.push({y:!0,number:!0,required:!0})):o.push({y:!0,number:!0,required:!0})),i.format=o}}function n(r,e){var n=r.datapoints.points,i=null,o=null,a=null,p=null,t=r.points.xerr,l=r.points.yerr,s=r.points.errorbars;"x"===s||"xy"===s?t.asymmetric?(i=n[e+2],o=n[e+3],"xy"===s&&(l.asymmetric?(a=n[e+4],p=n[e+5]):a=n[e+4])):(i=n[e+2],"xy"===s&&(l.asymmetric?(a=n[e+3],p=n[e+4]):a=n[e+3])):"y"===s&&(l.asymmetric?(a=n[e+2],p=n[e+3]):a=n[e+2]),null==o&&(o=i),null==p&&(p=a);var u=[i,o,a,p];return t.show||(u[0]=null,u[1]=null),l.show||(u[2]=null,u[3]=null),u}function i(r,e,i){var a,p,t,l,s,u,m,c,h,x,y=i.datapoints.points,d=i.datapoints.pointsize,f=[i.xaxis,i.yaxis],w=i.points.radius,C=[i.points.xerr,i.points.yerr],b=!1,v=!1;f[0].p2c(f[0].max)<f[0].p2c(f[0].min)&&(b=!0,a=C[0].lowerCap,C[0].lowerCap=C[0].upperCap,C[0].upperCap=a),f[1].p2c(f[1].min)<f[1].p2c(f[1].max)&&(v=!0,a=C[1].lowerCap,C[1].lowerCap=C[1].upperCap,C[1].upperCap=a);for(var g=0;g<i.datapoints.points.length;g+=d)for(p=n(i,g),l=0;l<C.length;l++)if(t=[f[l].min,f[l].max],p[l*C.length]){if(s=y[g],u=y[g+1],m=[s,u][l]+p[l*C.length+1],c=[s,u][l]-p[l*C.length],"x"===C[l].err&&(u>f[1].max||u<f[1].min||m<f[0].min||c>f[0].max))continue;if("y"===C[l].err&&(s>f[0].max||s<f[0].min||m<f[1].min||c>f[1].max))continue;x=!0,h=!0,m>t[1]&&(x=!1,m=t[1]),c<t[0]&&(h=!1,c=t[0]),("x"===C[l].err&&b||"y"===C[l].err&&v)&&(a=c,c=m,m=a,a=h,h=x,x=a,a=t[0],t[0]=t[1],t[1]=a),s=f[0].p2c(s),u=f[1].p2c(u),m=f[l].p2c(m),c=f[l].p2c(c),t[0]=f[l].p2c(t[0]),t[1]=f[l].p2c(t[1]);var q=C[l].lineWidth?C[l].lineWidth:i.points.lineWidth,k=null!=i.points.shadowSize?i.points.shadowSize:i.shadowSize;if(q>0&&k>0){var S=k/2;e.lineWidth=S,e.strokeStyle="rgba(0,0,0,0.1)",o(e,C[l],s,u,m,c,x,h,w,S+S/2,t),e.strokeStyle="rgba(0,0,0,0.2)",o(e,C[l],s,u,m,c,x,h,w,S/2,t)}e.strokeStyle=C[l].color?C[l].color:i.color,e.lineWidth=q,o(e,C[l],s,u,m,c,x,h,w,0,t)}}function o(e,n,i,o,p,t,l,s,u,m,c){o+=m,p+=m,t+=m,"x"===n.err?(p>i+u?a(e,[[p,o],[Math.max(i+u,c[0]),o]]):l=!1,i-u>t?a(e,[[Math.min(i-u,c[1]),o],[t,o]]):s=!1):(o-u>p?a(e,[[i,p],[i,Math.min(o-u,c[0])]]):l=!1,t>o+u?a(e,[[i,Math.max(o+u,c[1])],[i,t]]):s=!1),u=null!=n.radius?n.radius:u,l&&("-"===n.upperCap?"x"===n.err?a(e,[[p,o-u],[p,o+u]]):a(e,[[i-u,p],[i+u,p]]):r.isFunction(n.upperCap)&&("x"===n.err?n.upperCap(e,p,o,u):n.upperCap(e,i,p,u))),s&&("-"===n.lowerCap?"x"===n.err?a(e,[[t,o-u],[t,o+u]]):a(e,[[i-u,t],[i+u,t]]):r.isFunction(n.lowerCap)&&("x"===n.err?n.lowerCap(e,t,o,u):n.lowerCap(e,i,t,u)))}function a(r,e){r.beginPath(),r.moveTo(e[0][0],e[0][1]);for(var n=1;n<e.length;n++)r.lineTo(e[n][0],e[n][1]);r.stroke()}function p(e,n){var o=e.getPlotOffset();n.save(),n.translate(o.left,o.top),r.each(e.getData(),function(r,o){o.points.errorbars&&(o.points.xerr.show||o.points.yerr.show)&&i(e,n,o)}),n.restore()}function t(r){r.hooks.processRawData.push(e),r.hooks.draw.push(p)}var l={series:{points:{errorbars:null,xerr:{err:"x",show:null,asymmetric:null,upperCap:null,lowerCap:null,color:null,radius:null},yerr:{err:"y",show:null,asymmetric:null,upperCap:null,lowerCap:null,color:null,radius:null}}}};r.plot.plugins.push({init:t,options:l,name:"errorbars",version:"1.0"})}(jQuery);