!function(o){function s(s){function t(s,t,r,e,h,l){var n,i,a,u,p,d,c=r.points,f=r.pointsize,b=t.lines.show,v=o.extend({},t),g=[],w=[];for(v.datapoints={points:[],pointsize:f,format:r.format},v.label=null,v.color=l,v.threshold=null,v.originSeries=t,v.data=[],i=0;i<c.length;i+=f){if(a=c[i],u=c[i+1],n=p,p=e>u||u>h?g:w,b&&n!==p&&null!=a&&i>0&&null!=c[i-f]){var m=a+(e-u)*(a-c[i-f])/(u-c[i-f+1]);for(n.push(m),n.push(e),d=2;f>d;++d)n.push(c[i+d]);for(p.push(null),p.push(null),d=2;f>d;++d)p.push(c[i+d]);for(p.push(m),p.push(e),d=2;f>d;++d)p.push(c[i+d])}for(p.push(a),p.push(u),d=2;f>d;++d)p.push(c[i+d])}if(r.points=w,v.datapoints.points=g,v.datapoints.points.length>0){var k=o.inArray(t,s.getData());s.getData().splice(k+1,0,v)}}function r(s,r,e){r.threshold&&(r.threshold instanceof Array?(r.threshold.sort(function(o,s){return o.below-s.below}),o(r.threshold).each(function(o,h){t(s,r,e,h.below,h.above,h.color)})):t(s,r,e,r.threshold.below,r.threshold.above,r.threshold.color))}function e(s,t,r){if(r.threshold){var e=r.threshold.color?r.threshold.color:"black";o(".legendLabel").each(function(){if(o(this).text()===r.label){var s=o(this).prev().find("div > div");s.css("border-right-color",e),s.css("border-bottom-color",e)}})}}s.hooks.processDatapoints.push(r),s.hooks.drawSeries.push(e)}var t={series:{threshold:null}};o.plot.plugins.push({init:s,options:t,name:"threshold",version:"1.3"})}(jQuery);