!function(s){function n(s){function n(s,n){for(var t=null,i=0;i<n.length&&s!==n[i];++i)n[i].stack===s.stack&&(t=n[i]);return t}function t(s,t,i){if(null!=t.stack&&t.stack!==!1){var o=n(t,s.getData());if(o){for(var l,e,u,f,a,r,p,h,c=i.pointsize,k=i.points,g=o.datapoints.pointsize,v=o.datapoints.points,m=[],z=t.lines.show,b=t.bars.horizontal,d=c>2&&(b?i.format[2].x:i.format[2].y),y=!0,D=b?1:0,j=b?0:1,w=0,x=0;;){if(w>=k.length)break;if(p=m.length,null==k[w]){for(h=0;c>h;++h)m.push(k[w+h]);w+=c}else if(x>=v.length){if(!z)for(h=0;c>h;++h)m.push(k[w+h]);w+=c}else if(null==v[x]){for(h=0;c>h;++h)m.push(null);y=!0,x+=g}else{if(l=k[w+D],e=k[w+j],f=v[x+D],a=v[x+j],r=0,l===f){for(h=0;c>h;++h)m.push(k[w+h]);m[p+j]+=a,r=a,w+=c,x+=g}else if(l>f){if(z&&w>0&&null!=k[w-c]){for(u=e+(k[w-c+j]-e)*(f-l)/(k[w-c+D]-l),m.push(f),m.push(u+a),h=2;c>h;++h)m.push(k[w+h]);r=a}x+=g}else{if(y&&z){w+=c;continue}for(h=0;c>h;++h)m.push(k[w+h]);z&&x>0&&null!=v[x-g]&&(r=a+(v[x-g+j]-a)*(l-f)/(v[x-g+D]-f)),m[p+j]+=r,w+=c}y=!1,p!==m.length&&d&&(m[p+2]+=r)}}i.points=m}}}s.hooks.processDatapoints.push(t)}var t={series:{stack:null}};s.plot.plugins.push({init:n,options:t,name:"stack",version:"1.2"})}(jQuery);